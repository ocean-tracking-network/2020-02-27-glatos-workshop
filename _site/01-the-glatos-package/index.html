















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2020-02-18 12:17:43 -0400">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/swc/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/swc/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/swc/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/swc/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/swc/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/swc/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/swc/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/swc/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="Software Carpentry - ideasOTN GLATOS Package Intro"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/swc/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/swc/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/swc/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/swc/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/swc/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  The GLATOS Package &ndash; ideasOTN GLATOS Package Intro
  </title>  

  </head>
  <body>

    


<div class="panel panel-default life-cycle">
  <div id="life-cycle" class="panel-body beta">
    This lesson is being piloted (Beta version)
  </div>
</div>




    <div class="container">
      







<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->






<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../01-the-glatos-package/index.html">The GLATOS Package</a></li>
            
            
            <li><a href="../02-glatos-viz/index.html">Visualization Using GLATOS and a Sneak Peek</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            
            <li><a href="../about/index.html">About</a></li>
            
            
            <li><a href="../discuss/index.html">Discussion</a></li>
            
            
            <li><a href="../figures/index.html">Figures</a></li>
            
            
            <li><a href="../guide/index.html">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.html">License</a></li>
	
	<li><a href="/edit//_episodes/01-the-glatos-package.md" data-checker-ignore>Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>



















<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->







<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">ideasOTN GLATOS Package Intro</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-glatos-viz/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">The GLATOS Package</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br/>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>What is the GLATOS package?</p>
</li>
	
	<li><p>What are false detections?</p>
</li>
	
	<li><p>How can I filter false detections out of my data?</p>
</li>
	
	<li><p>What are some ways I can summarise my data?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Introduce the GLATOS package.</p>
</li>
	
	<li><p>Explain how false detections are produced.</p>
</li>
	
	<li><p>Introduce the Pincock algorithm.</p>
</li>
	
	<li><p>Demonstrate how the Pincock algorithm can filter false detections.</p>
</li>
	
	<li><p>Demonstrate methods for summarising data using the GLATOS package</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<h2 id="glatos">GLATOS</h2>
<p>There’s an ongoing effort to combine the work done by many researchers worldwide on the creation of these and other analysis and visualization tools so that work is not duplicated, and so that researchers don’t have to start from scratch when implementing analysis techniques.</p>

<p>The Great Lakes Acoustic Telemetry Observing System group has gathered a few of their more programming-minded researchers and authored an R package, and invited OTN and some technical people at Innovasea (Vemco) to help them maintain and extend this package to ensure that it’s useful for telemeters all over the world. There are a few very common methods of looking at acoustic detection data codified in glatos, and it serves as a great jumping off point for the design of new methods of analysis and visualization. The Pincock calculation above exists as a prebuilt function in the glatos toolbox, and there are a few others we’ll peek at now to help us with the visualization of these datasets.</p>

<p>The notebook concept is a bit new to the glatos package, so be aware that its functions save most of their output to files. Those files will be in your project folder.</p>

<h2 id="false-detection-filtering-using-the-pincock-algorithm">False Detection Filtering using the Pincock algorithm.</h2>

<p>Doug Pincock defined a temporal threshhold algorithm to determine whether detections in a set of detections from a station could be considered real (<a href="https://www.vemco.com/pdf/false_detections.pdf" title="Link to Pincock Paper">Source</a>). The thrust of the filter is that a single detection at a station could very well be false, and it would require multiple detections of a tag by a receiver within a certain time frame to confirm that tag actually existed and was pinging at that station, and its ID was not the result of a collision event between two other tags.</p>

<p>Tag collision resulting in no detection:</p>

<p>Tag collision resulting in false detection:
(figs from False Detections: What They Are and How to Remove Them from Detection Data, Pincock 2012)</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">glatos</span><span class="p">)</span><span class="w">

</span><span class="n">dets_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue_shark_detections.csv"</span><span class="p">,</span><span class="w">
                        </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"glatos"</span><span class="p">)</span><span class="w">

</span><span class="n">dets</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_otn_detections</span><span class="p">(</span><span class="n">dets_file</span><span class="p">)</span><span class="w">
</span><span class="n">dets</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">min_lag</span><span class="p">(</span><span class="n">dets</span><span class="p">)</span><span class="w">
</span><span class="n">dets</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">false_detections</span><span class="p">(</span><span class="n">dets</span><span class="p">,</span><span class="w"> </span><span class="n">tf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3600</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>The result of false_detections() adds a passed_filter column to the table. We can use this column to get only the detections that passed the filter.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">

</span><span class="n">dets_f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dets</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">passed_filter</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="summarising-detections">Summarising Detections</h2>

<p>We can use the glatos function <code class="highlighter-rouge">summarize_detections</code> to summarise where each animal was seen. We can use <code class="highlighter-rouge">detection_events</code> to group the detections in the events and make a summary from that. (An event is when an animal is detected at the same station multiple times within a time period, without being detected on another station)</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">det_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarize_detections</span><span class="p">(</span><span class="n">dets</span><span class="p">,</span><span class="w"> </span><span class="n">location_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'station'</span><span class="p">)</span><span class="w">

</span><span class="n">events</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">detection_events</span><span class="p">(</span><span class="n">dets_f</span><span class="p">,</span><span class="w"> </span><span class="n">location_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'station'</span><span class="p">)</span><span class="w">

</span><span class="n">event_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">animal_id</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">summarise</span><span class="p">(</span><span class="w">
    </span><span class="n">number_of_events</span><span class="o">=</span><span class="n">n_distinct</span><span class="p">(</span><span class="n">first_detection</span><span class="p">),</span><span class="w">
    </span><span class="n">total_detections</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">num_detections</span><span class="p">),</span><span class="w">
    </span><span class="n">total_time</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="n">res_time_sec</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>GLATOS can also get the residency index of the animals. Each station/location will be given a percentage of time an animal has been at that location.
Ideally, the sum of all REI for an animal should be 100% but it can be higher depending on the time interval used, and the size of the locations.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rei</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">residence_index</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="w">
</span><span class="n">rei</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">residence_index</span><span class="p">(</span><span class="n">events</span><span class="p">,</span><span class="w"> </span><span class="n">calculation_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'time_interval'</span><span class="p">,</span><span class="w"> </span><span class="n">time_interval_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'1 hour'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>And here’s a fun plot if we have time.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">event_summary</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">total_detections</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">animal_id</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-45</span><span class="p">))</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>The GLATOS package is a collection of data analysis and visualization tools.</p>
</li>
    
    <li><p>False detections are produced by tag collisions.</p>
</li>
    
    <li><p>The Pincock algorithm filters out false detections by comparing pings across nearby stations.</p>
</li>
    
    <li><p>The GLATOS package includes functions for summerise data</p>
</li>
    
  </ul>
</blockquote>

</article>


















<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->







<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-glatos-viz/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
	
	Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2018–2020
	by <a href="https://carpentries.org/">The Carpentries</a>
        <br>
        Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2016–2018
	by <a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	<a href="/edit//_episodes/01-the-glatos-package.md" data-checker-ignore>Edit on GitHub</a>
	
	/
	<a href="/blob//CONTRIBUTING.md" data-checker-ignore>Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION" data-checker-ignore>Cite</a>
	/
	<a href="mailto:team@carpentries.org">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
